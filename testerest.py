from fastapi import FastAPI
from fastapi.testclient import TestClient
from main import app
import parserquake

client = TestClient(app)

def test_listar_todos():
    response = client.get("/")
    assert response.status_code == 200
    #print(parserquake.json_jogos);
    #print(response.text);
    assert parserquake.json_jogos == '["game_1":{"total_kills":0,"players":["Isgalamido"],"kills":{"Isgalamido": 0}},"game_2":{"total_kills":11,"players":["Isgalamido", "Dono da Bola", "Mocinha"],"kills":{"Isgalamido": -8, "Dono da Bola": 0, "Mocinha": 1}},"game_3":{"total_kills":4,"players":["Dono da Bola", "Mocinha", "Isgalamido", "Zeh"],"kills":{"Dono da Bola": -1, "Mocinha": 1, "Isgalamido": 0, "Zeh": -2}},"game_4":{"total_kills":105,"players":["Dono da Bola", "Isgalamido", "Zeh", "Assasinu Credi"],"kills":{"Dono da Bola": 13, "Isgalamido": 7, "Zeh": 23, "Assasinu Credi": 17}},"game_5":{"total_kills":14,"players":["Dono da Bola", "Isgalamido", "Zeh", "Assasinu Credi"],"kills":{"Dono da Bola": 1, "Isgalamido": 0, "Zeh": 3, "Assasinu Credi": -2}},"game_6":{"total_kills":29,"players":["Fasano Again", "Oootsimo", "Isgalamido", "Zeh", "Dono da Bola", "UnnamedPlayer", "Maluquinho", "Assasinu Credi", "Mal"],"kills":{"Fasano Again": 0, "Oootsimo": 0, "Isgalamido": 5, "Zeh": 6, "Dono da Bola": 5, "UnnamedPlayer": 1, "Maluquinho": -1, "Assasinu Credi": 3, "Mal": 2}},"game_7":{"total_kills":130,"players":["Oootsimo", "Isgalamido", "Zeh", "Dono da Bola", "Mal", "Assasinu Credi", "Chessus!", "Chessus"],"kills":{"Oootsimo": 11, "Isgalamido": 5, "Zeh": 10, "Dono da Bola": 20, "Mal": 4, "Assasinu Credi": 16, "Chessus!": 0, "Chessus": 2}},"game_8":{"total_kills":89,"players":["Oootsimo", "Isgalamido", "Zeh", "Dono da Bola", "Mal", "Assasinu Credi"],"kills":{"Oootsimo": 11, "Isgalamido": 3, "Zeh": 5, "Dono da Bola": 10, "Mal": 13, "Assasinu Credi": 12}},"game_9":{"total_kills":67,"players":["Oootsimo", "Isgalamido", "Zeh", "Dono da Bola", "Mal", "Assasinu Credi", "Chessus!", "Chessus"],"kills":{"Oootsimo": 11, "Isgalamido": 1, "Zeh": 9, "Dono da Bola": 2, "Mal": 6, "Assasinu Credi": 9, "Chessus!": 0, "Chessus": 1}},"game_10":{"total_kills":60,"players":["Oootsimo", "Dono da Bola", "Zeh", "Chessus", "Mal", "Assasinu Credi", "Isgalamido"],"kills":{"Oootsimo": 4, "Dono da Bola": -1, "Zeh": 1, "Chessus": 7, "Mal": 4, "Assasinu Credi": 4, "Isgalamido": 4}},"game_11":{"total_kills":20,"players":["Dono da Bola", "Isgalamido", "Zeh", "Oootsimo", "Chessus", "Assasinu Credi", "UnnamedPlayer", "Mal"],"kills":{"Dono da Bola": -1, "Isgalamido": -1, "Zeh": 2, "Oootsimo": 1, "Chessus": 3, "Assasinu Credi": -2, "UnnamedPlayer": 0, "Mal": 1}},"game_12":{"total_kills":160,"players":["Isgalamido", "Dono da Bola", "Zeh", "Oootsimo", "Chessus", "Assasinu Credi", "Mal"],"kills":{"Isgalamido": 19, "Dono da Bola": 15, "Zeh": 12, "Oootsimo": 4, "Chessus": 15, "Assasinu Credi": 11, "Mal": -3}},"game_13":{"total_kills":6,"players":["Isgalamido", "Dono da Bola", "Zeh", "Oootsimo", "Chessus", "Assasinu Credi", "Mal"],"kills":{"Isgalamido": -1, "Dono da Bola": 0, "Zeh": 0, "Oootsimo": 0, "Chessus": 0, "Assasinu Credi": 2, "Mal": 0}},"game_14":{"total_kills":122,"players":["Isgalamido", "Dono da Bola", "Zeh", "Oootsimo", "Chessus", "Assasinu Credi", "Mal"],"kills":{"Isgalamido": 6, "Dono da Bola": 10, "Zeh": 6, "Oootsimo": 5, "Chessus": 8, "Assasinu Credi": 5, "Mal": 1}},"game_15":{"total_kills":3,"players":["Zeh", "Assasinu Credi", "Dono da Bola", "Fasano Again", "Isgalamido", "Oootsimo"],"kills":{"Zeh": -3, "Assasinu Credi": 0, "Dono da Bola": 0, "Fasano Again": 0, "Isgalamido": 0, "Oootsimo": 0}},"game_16":{"total_kills":0,"players":["Dono da Bola", "Oootsimo", "Isgalamido", "Assasinu Credi", "Zeh"],"kills":{"Dono da Bola": 0, "Oootsimo": 0, "Isgalamido": 0, "Assasinu Credi": 0, "Zeh": 0}},"game_17":{"total_kills":13,"players":["Dono da Bola", "Oootsimo", "Isgalamido", "Assasinu Credi", "Zeh", "UnnamedPlayer", "Mal"],"kills":{"Dono da Bola": -2, "Oootsimo": 0, "Isgalamido": -1, "Assasinu Credi": -2, "Zeh": 0, "UnnamedPlayer": 0, "Mal": -1}},"game_18":{"total_kills":7,"players":["Dono da Bola", "Oootsimo", "Isgalamido", "Assasinu Credi", "Zeh", "Mal"],"kills":{"Dono da Bola": -1, "Oootsimo": 1, "Isgalamido": 1, "Assasinu Credi": 1, "Zeh": 1, "Mal": 0}},"game_19":{"total_kills":95,"players":["Isgalamido", "Oootsimo", "Dono da Bola", "Assasinu Credi", "Zeh", "Mal"],"kills":{"Isgalamido": 9, "Oootsimo": 12, "Dono da Bola": 11, "Assasinu Credi": 10, "Zeh": 16, "Mal": 7}},"game_20":{"total_kills":3,"players":["Isgalamido", "Oootsimo", "Dono da Bola", "Assasinu Credi", "Zeh", "Mal"],"kills":{"Isgalamido": 0, "Oootsimo": 0, "Dono da Bola": 0, "Assasinu Credi": 1, "Zeh": 1, "Mal": 0}}]';

def test_listar_jogo():
    response = client.get("/jogos/1");
    assert response.status_code == 200;
    assert parserquake.lista_jogos[1].toJSON() =='"game_2":{"total_kills":11,"players":["Isgalamido", "Dono da Bola", "Mocinha"],"kills":{"Isgalamido": -8, "Dono da Bola": 0, "Mocinha": 1}}';

test_listar_todos();
test_listar_jogo();